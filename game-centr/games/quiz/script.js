// –í–æ–ø—Ä–æ—Å—ã: —Ñ—Ä–∞–≥–º–µ–Ω—Ç, –ø–æ–ª–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç, –≤–∞—Ä–∏–∞–Ω—Ç—ã
const questions = [
  {
    preview: "assets/preview1.png",
    full: "assets/full1.png",
    correct: "–¢—Ä–∞–ª–∞–ª–µ–ª–æ –¢—Ä–∞–ª–∞–ª–∞",
    options: [
      "–ö–∞–ø—É—á–∏–Ω–æ –ê—Å—Å–∞—Å—Å–∏–Ω–æ",
      "–ë–æ–º–±–æ–º–±–∏–Ω–∏ –≥—É–∑–∏–Ω–∏",
      "–¢—Ä–∞–ª–∞–ª–µ–ª–æ –¢—Ä–∞–ª–∞–ª–∞",
      "–ë–æ–º –ë–æ–º –ë–æ–º –ë–æ–º –ë–æ–º –ì–∞–∑—É–Ω"
    ]
  },
    {
    preview: "assets/preview3.jpg",
    full: "assets/full3.jpg",
    correct: "–ë–æ–º–±–∞—Ä–¥–∏—Ä–æ –ö—Ä–æ–∫–æ–¥–∏–ª–æ",
    options: [
      "–ö–∞–ø—É—á–∏–Ω–æ –ê—Å—Å–∞—Å—Å–∏–Ω–æ",
      "–ë–æ–º–±–∞—Ä–¥–∏—Ä–æ –ö—Ä–æ–∫–æ–¥–∏–ª–æ",
      "–õ–∏—Ä–∏–ª–∏ –õ–∞—Ä–∏–ª–∞",
      "–ë–æ–º –ë–æ–º –ë–æ–º –ë–æ–º –ë–æ–º –ì–∞–∑—É–Ω"
    ]
  },
    {
    preview: "assets/preview4.png",
    full: "assets/full4.png",
    correct: "–®–∏–º–ø–∞–Ω–∑–∏–Ω–∏ –ë–∞–Ω–∞–Ω–∏–Ω–∏",
    options: [
      "–®–∏–º–ø–∞–Ω–∑–∏–Ω–∏ –ë–∞–Ω–∞–Ω–∏–Ω–∏",
      "–û—Ä–∞–Ω–≥—É—Ç–∏–Ω–∏ –ê–Ω–∞–Ω–∞—Å–∏–Ω–∏",
      "–¢—Ä–∞–ª–∞–ª–µ–ª–æ –¢—Ä–∞–ª–∞–ª–∞",
      "–õ–∞ –í–∞–∫–∞ –°–∞—Ç—É—Ä–Ω–æ –°–∞—Ç—É—Ä–Ω–∏—Ç–∞"
    ]
  },
    {
    preview: "assets/preview5.png",
    full: "assets/full5.png",
    correct: "–¢—É–Ω —Ç—É–Ω —Ç—É–Ω –°–∞—Ö—É—Ä",
    options: [
      "–®–ø–∏–æ–Ω–∏—Ä–æ –ì–æ–ª—É–±–∏—Ä–æ",
      "–¢—É–Ω —Ç—É–Ω —Ç—É–Ω –°–∞—Ö—É—Ä",
      "–¢—Ä–∞–∫—É—Ç—É–ª—É—Ç—É–ª—É –î–µ–ª–∞–ø–µ–ª–∞–¥—É—Å—Ç—É–∑ ",
      "–§—Ä–∏–≥–æ –ö–∞–º–µ–ª–æ"
    ]
  },
    {
    preview: "assets/preview6.jpg",
    full: "assets/full6.jpg",
    correct: "–õ–∏—Ä–∏–ª–∏ –õ–∞—Ä–∏–ª–∞",
    options: [
      "–ú–∞—É—Å–∏–Ω–∏ –ö–≤–æ–¥—Ä–æ–∫–æ–ø—Ç–∏–Ω–∏",
      "–¢—Ä—É–ª–∏–º–µ—Ä–æ –¢—Ä—É–ª–∏—á–∏–Ω–∞",
      "–§—Ä–∏–≥–æ –ö–∞–º–µ–ª–æ",
      "–õ–∏—Ä–∏–ª–∏ –õ–∞—Ä–∏–ª–∞"
    ]
  },
    {
    preview: "assets/preview7.jpg",
    full: "assets/full7.jpg",
    correct: "–¢—Ä–∏–ø–∏ –¢—Ä–æ–ø–∏",
    options: [
      "–ë–æ–±—Ä–∏—Ç–æ –ë–∞–Ω–¥–∏—Ç–æ",
      "–ë–æ–º–±–æ–º–±–∏–Ω–∏ –≥—É–∑–∏–Ω–∏",
      "–¢—Ä–∏–ø–∏ –¢—Ä–æ–ø–∏",
      "–¢—Ä–∞–∫—É—Ç—É–ª—É—Ç—É–ª—É "
    ]
  },
    {
    preview: "assets/preview8.png",
    full: "assets/full8.png",
    correct: "–ë–æ–±—Ä–∏—Ç–æ –ë–∞–Ω–¥–∏—Ç–æ",
    options: [
      "–ë–æ–±—Ä–∏—Ç–æ –ë–∞–Ω–¥–∏—Ç–æ",
      "–§—Ä–∏–≥–æ –ö–∞–º–µ–ª–æ ",
      "–î–∏–º–∏–Ω –¥–∏ –¥–∞—É ",
      "–ë–æ–º –ë–æ–º –ë–æ–º –ë–æ–º –ë–æ–º –ì–∞–∑—É–Ω"
    ]
  },
    {
    preview: "assets/preview9.jpg",
    full: "assets/full9.jpg",
    correct: "–§—Ä—É–ª–∏ –§—Ä—É–ª–∞",
    options: [
      "–§—Ä—É–ª–∏ –§—Ä—É–ª–∞",
      "–§—Ä–∏–≥–æ –ö–∞–º–µ–ª–æ",
      "–õ–∏—Ä–∏–ª–∏ –õ–∞—Ä–∏–ª–∞",
      "–¢—Ä—É–ª–∏–º–µ—Ä–æ –¢—Ä—É–ª–∏—á–∏–Ω–∞"
    ]
  },
    {
    preview: "assets/preview10.png",
    full: "assets/full10.png",
    correct: "–ë–æ–º–±–æ–º–±–∏–Ω–∏ –≥—É–∑–∏–Ω–∏",
    options: [
      "–ö–∞–ø—É—á–∏–Ω–æ –ê—Å—Å–∞—Å—Å–∏–Ω–æ",
      "–¢—Ä—É–ª–∏–º–µ—Ä–æ –¢—Ä—É–ª–∏—á–∏–Ω–∞",
      "–¢—Ä–∞–ª–∞–ª–µ–ª–æ –¢—Ä–∞–ª–∞–ª–∞",
      "–ë–æ–º–±–æ–º–±–∏–Ω–∏ –≥—É–∑–∏–Ω–∏"
    ]
  },
    {
    preview: "assets/preview11.png",
    full: "assets/full11.png",
    correct: "–¢—Ä—É–ª–∏–º–µ—Ä–æ –¢—Ä—É–ª–∏—á–∏–Ω–æ",
    options: [
      "–¢—Ä—É–ª–∏–º–µ—Ä–æ –¢—Ä—É–ª–∏—á–∏–Ω–æ",
      "–ë–æ–º–±–æ–º–±–∏–Ω–∏ –≥—É–∑–∏–Ω–∏",
      "–ë—É–ª–ª–∏—á–∏–Ω–∏ –ë–∞–Ω–∞–Ω–∏–Ω–∏",
      "–ì–ª–æ—Ä–±–æ-—Ñ—Ä—É—Ç–æ–¥—Ä–∏–ª–ª–æ"
    ]
  },
    {
    preview: "assets/preview12.png",
    full: "assets/full12.png",
    correct: "–ë—Ä –ë—Ä –ü–∞—Ç–∞–ø–∏–º",
    options: [
      "–ö–∞–ø—É—á–∏–Ω–æ –ê—Å—Å–∞—Å—Å–∏–Ω–æ",
      "–ë–æ–º–±–æ–º–±–∏–Ω–∏ –≥—É–∑–∏–Ω–∏",
      "–ë—Ä –ë—Ä –ü–∞—Ç–∞–ø–∏–º",
      "–¢—Ä—É–ª–∏–º–µ—Ä–æ –¢—Ä—É–ª–∏—á–∏–Ω–∞"
    ]
  },
  {
    preview: "assets/preview2.jpg",
    full: "assets/full2.jpg",
    correct: "–ë–∞–ª–µ—Ä–∏–Ω–∞ –ö–∞–ø—É—á–∏–Ω–∞",
    options: [
      "–®–∏–º–ø–∞–Ω–∑–∏–Ω–∏ –ë–∞–Ω–∞–Ω–∏–Ω–∏",
      "–¢—Ä–∏–ø–ø–∏ –¢—Ä–æ–ø–ø–æ –¢—Ä–æ–ø–ø–∞ –¢—Ä–∏–ø–ø–∞ ",
      "–ü–∏–ø–∏ –ü–æ—Ç–∞—Ç–æ",
      "–ë–∞–ª–µ—Ä–∏–Ω–∞ –ö–∞–ø—É—á–∏–Ω–∞"
    ]
  }

];

let currentQuestion = 0;
let score = 0;
let timer = null;
let timeLeft = 10;

// –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
const questionContainer = document.getElementById("question-container");
const resultScreen = document.getElementById("result-screen");
const endScreen = document.getElementById("end-screen");
const memePreview = document.getElementById("meme-preview");
const optionsContainer = document.getElementById("options");
const nextBtn = document.getElementById("next-btn");
const resultMessage = document.getElementById("result-message");
const fullMeme = document.getElementById("full-meme");
const nextQuestionBtn = document.getElementById("next-question-btn");

// –°—á—ë—Ç—á–∏–∫
const scoreSpan = document.getElementById("score");
const totalSpan = document.getElementById("total");

// –¢–∞–π–º–µ—Ä
const timerElement = document.getElementById("timer");

// –≠–∫—Ä–∞–Ω –æ–∫–æ–Ω—á–∞–Ω–∏—è
const finalScoreSpan = document.getElementById("final-score");
const totalQuestionsSpan = document.getElementById("total-questions");
const playAgainBtn = document.getElementById("play-again-btn");

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç–∞
function updateScore() {
  scoreSpan.textContent = score;
  totalSpan.textContent = questions.length;
}

// –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
function startTimer() {
  timeLeft = 10;
  timerElement.textContent = timeLeft;
  timerElement.className = "timer";

  if (timer) clearInterval(timer);

  timer = setInterval(() => {
    timeLeft--;
    timerElement.textContent = timeLeft;

    if (timeLeft <= 3) {
      timerElement.className = "timer danger";
    } else if (timeLeft <= 6) {
      timerElement.className = "timer warning";
    }

    if (timeLeft <= 0) {
      clearInterval(timer);
      timeIsUp();
    }
  }, 1000);
}

// –í—Ä–µ–º—è –≤—ã—à–ª–æ
function timeIsUp() {
  document.querySelectorAll(".option-btn").forEach((btn) => {
    btn.disabled = true;
  });

  const q = questions[currentQuestion];
  resultMessage.textContent = `‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: "${q.correct}"`;
  fullMeme.src = q.full;
  fullMeme.onerror = () => {
    fullMeme.src = "https://via.placeholder.com/400?text=–ü–æ–ª–Ω—ã–π+–º–µ–º";
  };

  questionContainer.style.display = "none";
  resultScreen.style.display = "block";
}

// –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–∞
function stopTimer() {
  if (timer) {
    clearInterval(timer);
    timer = null;
  }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–∞
function loadQuestion() {
  const q = questions[currentQuestion];
  memePreview.src = q.preview;
  memePreview.onerror = () => {
    memePreview.src = "https://via.placeholder.com/300?text=–§—Ä–∞–≥–º–µ–Ω—Ç+–º–µ–º–∞";
  };

  optionsContainer.innerHTML = "";
  q.options.forEach((option) => {
    const button = document.createElement("button");
    button.classList.add("option-btn");
    button.textContent = option;
    button.addEventListener("click", () => {
      stopTimer();
      selectOption(button, option === q.correct);
    });
    optionsContainer.appendChild(button);
  });

  nextBtn.disabled = true;
  questionContainer.style.display = "block";
  resultScreen.style.display = "none";
  endScreen.style.display = "none";

  stopTimer();
  startTimer();
  updateScore();
}

// –í—ã–±–æ—Ä –æ—Ç–≤–µ—Ç–∞
function selectOption(button, isCorrect) {
  document.querySelectorAll(".option-btn").forEach((btn) => {
    btn.disabled = true;
    btn.classList.remove("selected");
  });
  button.classList.add("selected");

  if (isCorrect) {
    score++;
  }

  nextBtn.disabled = false;
  nextBtn.onclick = () => showResult(isCorrect);
}

// –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
function showResult(isCorrect) {
  const q = questions[currentQuestion];
  resultMessage.textContent = isCorrect
    ? "üéâ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –í–æ—Ç –ø–æ–ª–Ω—ã–π –º–µ–º:"
    : `ü§î –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: "${q.correct}"`;

  fullMeme.src = q.full;
  fullMeme.onerror = () => {
    fullMeme.src = "https://via.placeholder.com/400?text=–ü–æ–ª–Ω—ã–π+–º–µ–º";
  };

  stopTimer();
  questionContainer.style.display = "none";
  resultScreen.style.display = "block";
  updateScore();
}

// –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É –∏–ª–∏ –∫–æ–Ω–µ—Ü –∏–≥—Ä—ã
nextQuestionBtn.addEventListener("click", () => {
  currentQuestion++;
  if (currentQuestion >= questions.length) {
    showEndScreen();
  } else {
    loadQuestion();
  }
});

// –ü–æ–∫–∞–∑ —ç–∫—Ä–∞–Ω–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è
function showEndScreen() {
  finalScoreSpan.textContent = score;
  totalQuestionsSpan.textContent = questions.length;

  questionContainer.style.display = "none";
  resultScreen.style.display = "none";
  endScreen.style.display = "block";
}

// –ö–Ω–æ–ø–∫–∞ "–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞"
playAgainBtn.addEventListener("click", () => {
  currentQuestion = 0;
  score = 0;
  endScreen.style.display = "none";
  loadQuestion();
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener("DOMContentLoaded", () => {
  totalQuestionsSpan.textContent = questions.length; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
  updateScore();
  loadQuestion();
});